(ns phel-test\test\core\threading-macros
  (:require phel\test :refer [deftest is]))

(deftest test->
  (is (= 1 (-> 1)))
  (is (= 3 (-> 5 (+ 3) (/ 2) (- 1))))
  (is (= 8 (-> [1 8 3 4] sort reverse first))))

(deftest test->>
  (is (= 1 (->> 1)))
  (is (= 0.75 (->> 5 (+ 3) (/ 2) (- 1))))
  (is (= [2 3 4 5 6] (->> [1 2 [3 4] 5] flatten (map inc)))))

(deftest test-as->
  (is (= 1 (as-> 1 v)))
  (is (= -3 (as-> 5 v (+ 3 v) (/ v 2) (- 1 v))))
  (is (= "oo" (as-> [:foo :bar] v (map |(php/-> $ (getName)) v) (first v) (php/substr v 1)))))
